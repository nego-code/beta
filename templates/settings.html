{% extends 'base.html' %}

{% block title %}Ustawienia - Nego{% endblock %}

{% block head %}
  <style>
  .custom-alert {
      background-color: #e9ecef!important;
      border: 1px solid #dee2e6;
      color: #343a40;
    }
  .nav-tabs.nav-fill.nav-link {
      white-space: nowrap;
    }
  </style>
{% endblock %}

{% block content %}
  <div class="banner">
    <div class="col-md-4">
      <div class="card mb-4">
        <div class="card-header text-center">
          <h4>Ustawienia</h4>
        </div>
        <div class="card-body">
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, message in messages %}
                <div class="alert alert-{{ category }} custom-alert">{{ message }}</div>
              {% endfor %}
            {% endif %}
          {% endwith %}
          
          <ul class="nav nav-tabs nav-fill" id="settingsTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="appearance-tab" data-bs-toggle="tab" data-bs-target="#appearance" type="button" role="tab" aria-controls="appearance" aria-selected="true">
                Wygląd
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="user-tab" data-bs-toggle="tab" data-bs-target="#user" type="button" role="tab" aria-controls="user" aria-selected="false">
                Użytkownik
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="language-tab" data-bs-toggle="tab" data-bs-target="#language" type="button" role="tab" aria-controls="language" aria-selected="false">
                Język
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab" aria-controls="security" aria-selected="false">
                Zabezpieczenia
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="subscriptions-tab" data-bs-toggle="tab" data-bs-target="#subscriptions" type="button" role="tab" aria-controls="subscriptions" aria-selected="false">
                Subskrypcje
              </button>
            </li>
          </ul>
          
          <div class="tab-content" id="settingsTabContent">
            <div class="tab-pane fade show active" id="appearance" role="tabpanel" aria-labelledby="appearance-tab">
              <div class="mt-3">
                <form method="POST" action="/settings" enctype="multipart/form-data">
                  <div class="mb-3">
                    <label for="banner_file" class="form-label">Wgraj obraz z dysku</label>
                    <input type="file" class="form-control" id="banner_file" name="banner_file">
                  </div>
                  <div class="mb-3">
                    <label for="banner_url" class="form-label">Lub podaj URL obrazu</label>
                    <input type="url" class="form-control" id="banner_url" name="banner_url" placeholder="https://example.com/banner.jpg">
                  </div>
                  <button type="submit" class="btn w-100">
                    <i class="fas fa-save"></i> Zapisz ustawienia
                  </button>
                </form>
                <div class="mt-3">
                  <p>Aktualny banner:</p>
                  <img src="{{ session.get('banner_image', url_for('static', filename='images/banner.jpg')) }}" alt="Banner" class="img-fluid">
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="user" role="tabpanel" aria-labelledby="user-tab">
              <div class="mt-3">
                <p>Opcje edycji Twoich danych osobowych będą dostępne tutaj.</p>
              </div>
            </div>
            <div class="tab-pane fade" id="language" role="tabpanel" aria-labelledby="language-tab">
              <div class="mt-3">
                <p>Opcje wyboru preferowanego języka interfejsu będą dostępne tutaj.</p>
              </div>
            </div>
            <div class="tab-pane fade" id="security" role="tabpanel" aria-labelledby="security-tab">
              <div class="mt-3">
                <p>Opcje zmiany hasła oraz ustawień zabezpieczeń będą dostępne tutaj.</p>
              </div>
            </div>
            <div class="tab-pane fade" id="subscriptions" role="tabpanel" aria-labelledby="subscriptions-tab">
              <div class="mt-3">
                <p>Opcje zarządzania subskrypcjami i powiadomieniami będą dostępne tutaj.</p>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>
    <img src="{{ session.get('banner_image', url_for('static', filename='images/banner.jpg')) }}" alt="Banner">
  </div>
{% endblock %}